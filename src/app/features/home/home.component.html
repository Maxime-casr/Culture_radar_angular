<!-- Banni√®re cach√©e si connect√© -->
<div class="hero-banner" *ngIf="showHero">
  <div class="hero-overlay">
    <h1 class="hero-title">D√©couvrez les meilleurs √©v√©nements pr√®s de chez vous</h1>
    <p class="hero-subtitle">Concerts, expositions, festivals‚Ä¶ il y en a pour tous les go√ªts !</p>
  </div>
</div>

<section class="event-section">
  <h2 class="section-title">{{ sectionTitle }}</h2>

  <!-- Loading -->
  <div class="event-grid" *ngIf="loading">
    <div class="skeleton-card" *ngFor="let n of [1,2,3,4,5,6,7,8]; trackBy: trackByIndex"></div>
  </div>

  <!-- Empty -->
  <div class="empty" *ngIf="!loading && filteredEvents.length === 0">
    <p>Aucun √©v√©nement trouv√©. Essaie un autre mot-cl√© ou une autre ville.</p>
  </div>

  <!-- Grid -->
  <div class="event-grid" *ngIf="!loading && filteredEvents.length">
    <div class="event-card" *ngFor="let event of filteredEvents; trackBy: trackById">
      <div class="img-wrap">
        <img
          [src]="event.image_url"
          [attr.alt]="event.title"
          class="event-img"
          (error)="onImgError($event.target)"
        />
        <div class="chips">
          <span class="chip type" *ngIf="event.type">{{ event.type }}</span>
          <span class="chip city" *ngIf="event.commune">{{ event.commune }}</span>
        </div>
      </div>

      <div class="owner-badge" *ngIf="event.owner_id">
        <img src="/logo.png" alt="Organisateur" />
      </div>

      <div class="event-info">
        <h3>{{ event.title }}</h3>

        <p class="meta" *ngIf="event.rangeStart || event.rangeEnd || event.lieu">
          <span *ngIf="event.rangeStart">{{ formatDateRange(event.rangeStart, event.rangeEnd) }}</span>
          <span *ngIf="(event.rangeStart || event.rangeEnd) && event.lieu"> ‚Ä¢ </span>
          <span *ngIf="event.lieu">{{ event.lieu }}</span>
        </p>

        <!-- üëá Bloc note -->
      <div class="rating" *ngIf="event.ratingAvg !== null">
        <span class="stars" aria-label="Note moyenne">
          <ng-container *ngFor="let s of makeStars(event.ratingAvg); let i = index">
            <span class="star" [class.full]="s === 'full'">‚òÖ</span>
          </ng-container>
        </span>
        <span class="rating-num">{{ event.ratingAvg | number:'1.1-1' }}</span>
        <span class="rating-count">({{ event.ratingCount }})</span>
      </div>



        <p class="desc line-clamp">{{ event.description }}</p>

        <div class="actions">
          <a [routerLink]="['/event', event.id]" class="btn-details" aria-label="Voir les d√©tails">En savoir plus</a>

        </div>
      </div>
    </div>
  </div>
</section>






